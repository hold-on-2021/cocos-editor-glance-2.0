"use strict";const{promisify:r}=require("util"),e=require("path"),o=require("globby"),i=require("is-glob"),t=require("slash"),n=require("graceful-fs"),c=require("is-path-cwd"),s=require("is-path-inside"),a=require("rimraf"),d=require("p-map"),l=r(a),u={glob:!1,unlink:n.unlink,unlinkSync:n.unlinkSync,chmod:n.chmod,chmodSync:n.chmodSync,stat:n.stat,statSync:n.statSync,lstat:n.lstat,lstatSync:n.lstatSync,rmdir:n.rmdir,rmdirSync:n.rmdirSync,readdir:n.readdir,readdirSync:n.readdirSync};function y(r,e){if(c(r))throw new Error("Cannot delete the current working directory. Can be overridden with the `force` option.");if(!s(r,e))throw new Error("Cannot delete files/directories outside the current working directory. Can be overridden with the `force` option.")}function m(r){return r=(r=Array.isArray(r)?r:[r]).map(r=>"win32"===process.platform&&!1===i(r)?t(r):r)}module.exports=(async(r,{force:i,dryRun:t,cwd:n=process.cwd(),...c}={})=>{c={expandDirectories:!1,onlyFiles:!1,followSymbolicLinks:!1,cwd:n,...c},r=m(r);const s=(await o(r,c)).sort((r,e)=>e.localeCompare(r)),a=await d(s,async r=>(r=e.resolve(n,r),i||y(r,n),t||await l(r,u),r),c);return a.sort((r,e)=>r.localeCompare(e)),a}),module.exports.sync=((r,{force:i,dryRun:t,cwd:n=process.cwd(),...c}={})=>{c={expandDirectories:!1,onlyFiles:!1,followSymbolicLinks:!1,cwd:n,...c},r=m(r);const s=o.sync(r,c).sort((r,e)=>e.localeCompare(r)).map(r=>(r=e.resolve(n,r),i||y(r,n),t||a.sync(r,u),r));return s.sort((r,e)=>r.localeCompare(e)),s});