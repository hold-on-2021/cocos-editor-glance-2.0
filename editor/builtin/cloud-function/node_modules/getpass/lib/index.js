module.exports={getPass:function(s,a){"function"==typeof s&&void 0===a&&(a=s,s={});o.object(s,"options"),o.func(a,"callback"),o.optionalString(s.prompt,"options.prompt"),void 0===s.prompt&&(s.prompt="Password");(function(o){t.open("/dev/tty","r+",function(r,n){if(r&&("ENOENT"===r.code||"EACCES"===r.code)||process.version.match(/^v0[.][0-8][.]/))return o(null,void 0,void 0,process.stdin,process.stdout),void 0;var i=new e.ReadStream(n);t.open("/dev/tty","w+",function(t,r){var s=new e.WriteStream(r);if(t)return o(t),void 0;o(null,n,r,i,s)})})})(function(e,o,c,d,u){if(e)return a(e),void 0;u.write(s.prompt+":"),d.resume(),d.setRawMode(!0),d.resume(),d.setEncoding("utf8");var p="";function v(e){for(var t=e.toString("utf8"),o=0;o<t.length;++o){var s=t[o];switch(s){case"\r":case"\n":case i:return f(),a(null,p),void 0;case n:return f(),a(new Error("Aborted")),void 0;case r:p=p.slice(0,p.length-1);break;default:p+=s}}}function f(){u.write("\r\n"),d.setRawMode(!1),d.pause(),d.removeListener("data",v),void 0!==c&&c!==o&&(u.end(),t.closeSync(c)),void 0!==o&&(d.end(),t.closeSync(o))}d.on("data",v)})}};const e=require("tty"),t=require("fs"),o=require("assert-plus");var r=String.fromCharCode(127),n="",i="";