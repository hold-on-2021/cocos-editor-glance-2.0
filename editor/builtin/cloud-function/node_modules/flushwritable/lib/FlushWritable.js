var t=require("events").EventEmitter,e=require("stream").Writable;function i(t){e.call(this,t)}require("util").inherits(i,e),i.prototype.emit=function(i){if("finish"===i&&this._flush&&!e.prototype._flush)this._flush(function(e){e?t.prototype.emit.call(this,"error",e):t.prototype.emit.call(this,"finish")}.bind(this));else{var r=Array.prototype.slice.call(arguments);t.prototype.emit.apply(this,r)}},module.exports=i;