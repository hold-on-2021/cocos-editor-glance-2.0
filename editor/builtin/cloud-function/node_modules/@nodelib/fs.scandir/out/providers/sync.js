"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("@nodelib/fs.stat"),e=require("../constants"),r=require("../utils");function n(t,e){return e.fs.readdirSync(t,{withFileTypes:!0}).map(n=>{const s={dirent:n,name:n.name,path:`${t}${e.pathSegmentSeparator}${n.name}`};if(s.dirent.isSymbolicLink()&&e.followSymbolicLinks)try{const t=e.fs.statSync(s.path);s.dirent=r.fs.createDirentFromStats(s.name,t)}catch(t){if(e.throwErrorOnBrokenSymbolicLink)throw t}return s})}function s(e,n){return n.fs.readdirSync(e).map(s=>{const a=`${e}${n.pathSegmentSeparator}${s}`,i=t.statSync(a,n.fsStatSettings),o={name:s,path:a,dirent:r.fs.createDirentFromStats(s,i)};return n.stats&&(o.stats=i),o})}exports.read=function(t,r){return!r.stats&&e.IS_SUPPORT_READDIR_WITH_FILE_TYPES?n(t,r):s(t,r)},exports.readdirWithFileTypes=n,exports.readdir=s;