"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("stream"),r=require("../readers/stream"),t=require("./provider");exports.default=class extends t.default{constructor(){super(...arguments),this._reader=new r.default(this._settings)}read(r){const t=this._getRootDirectory(r),s=this._getReaderOptions(r),a=this.api(t,r,s),i=new e.Readable({objectMode:!0,read:()=>{}});return a.once("error",e=>i.emit("error",e)).on("data",e=>i.emit("data",s.transform(e))).once("end",()=>i.emit("end")),i.once("close",()=>a.destroy()),i}api(e,r,t){return r.dynamic?this._reader.dynamic(e,t):this._reader.static(r.patterns,t)}};