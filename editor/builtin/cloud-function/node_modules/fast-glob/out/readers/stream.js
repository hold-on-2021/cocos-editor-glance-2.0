"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("stream"),e=require("@nodelib/fs.stat"),r=require("@nodelib/fs.walk"),s=require("./reader");exports.default=class extends s.default{constructor(){super(...arguments),this._walkStream=r.walkStream,this._stat=e.stat}dynamic(t,e){return this._walkStream(t,e)}static(e,r){const s=e.map(this._getFullEntryPath,this),n=new t.PassThrough({objectMode:!0});n._write=((t,a,i)=>this._getEntry(s[t],e[t],r).then(e=>{null!==e&&r.entryFilter(e)&&n.push(e),t===s.length-1&&n.end(),i()}).catch(i));for(let t=0;t<s.length;t++)n.write(t);return n}_getEntry(t,e,r){return this._getStat(t).then(t=>this._makeEntry(t,e)).catch(t=>{if(r.errorFilter(t))return null;throw t})}_getStat(t){return new Promise((e,r)=>{this._stat(t,this._fsStatSettings,(t,s)=>null===t?e(s):r(t))})}};