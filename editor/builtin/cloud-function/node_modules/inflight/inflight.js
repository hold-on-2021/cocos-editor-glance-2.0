var n=require("wrappy"),e=Object.create(null),r=require("once");module.exports=n(function(n,l){return e[n]?(e[n].push(l),null):(e[n]=[l],function(n){return r(function r(){var l=e[n],t=l.length,u=function(n){for(var e=n.length,r=[],l=0;l<e;l++)r[l]=n[l];return r}(arguments);try{for(var c=0;c<t;c++)l[c].apply(null,u)}finally{l.length>t?(l.splice(0,t),process.nextTick(function(){r.apply(null,u)})):delete e[n]}})}(n))});