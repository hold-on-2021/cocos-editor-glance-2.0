import{invokeCallback as t,subscribe as o,FULFILLED as n,REJECTED as r,noop as e,makePromise as s,PROMISE_ID as i}from"./-internal";import{asap as c}from"./asap";export default function then(n,r){const a=this,f=new this.constructor(e);void 0===f[i]&&s(f);const{_state:u}=a;if(u){const o=arguments[u-1];c(()=>t(u,f,o,a._result))}else o(a,f,n,r);return f};