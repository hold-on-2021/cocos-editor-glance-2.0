"use strict";var e=require("safer-buffer").Buffer,n=require("./bom-handling"),r=module.exports;r.encodings=null,r.defaultCharUnicode="ï¿½",r.defaultCharSingleByte="?",r.encode=function(n,o,c){n=""+(n||"");var i=r.getEncoder(o,c),t=i.write(n),d=i.end();return d&&d.length>0?e.concat([t,d]):t},r.decode=function(n,o,c){"string"==typeof n&&(r.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),r.skipDecodeWarning=!0),n=e.from(""+(n||""),"binary"));var i=r.getDecoder(o,c),t=i.write(n),d=i.end();return d?t+d:t},r.encodingExists=function(e){try{return r.getCodec(e),!0}catch(e){return!1}},r.toEncoding=r.encode,r.fromEncoding=r.decode,r._codecDataCache={},r.getCodec=function(e){r.encodings||(r.encodings=require("../encodings"));for(var n=r._canonicalizeEncoding(e),o={};;){var c=r._codecDataCache[n];if(c)return c;var i=r.encodings[n];switch(typeof i){case"string":n=i;break;case"object":for(var t in i)o[t]=i[t];o.encodingName||(o.encodingName=n),n=i.type;break;case"function":return o.encodingName||(o.encodingName=n),c=new i(o,r),r._codecDataCache[o.encodingName]=c,c;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+n+"')")}}},r._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},r.getEncoder=function(e,o){var c=r.getCodec(e),i=new c.encoder(o,c);return c.bomAware&&o&&o.addBOM&&(i=new n.PrependBOM(i,o)),i},r.getDecoder=function(e,o){var c=r.getCodec(e),i=new c.decoder(o,c);return!c.bomAware||o&&!1===o.stripBOM||(i=new n.StripBOM(i,o)),i};var o="undefined"!=typeof process&&process.versions&&process.versions.node;if(o){var c=o.split(".").map(Number);(c[0]>0||c[1]>=10)&&require("./streams")(r),require("./extend-node")(r)}0;