"use strict";var e=require("mime-db"),t=require("path").extname,r=/^\s*([^;\s]*)(?:;|\s|$)/,n=/^text\//i;function s(t){if(!t||"string"!=typeof t)return!1;var s=r.exec(t),o=s&&e[s[1].toLowerCase()];return o&&o.charset?o.charset:!(!s||!n.test(s[1]))&&"UTF-8"}exports.charset=s,exports.charsets={lookup:s},exports.contentType=function(e){if(!e||"string"!=typeof e)return!1;var t=-1===e.indexOf("/")?exports.lookup(e):e;if(!t)return!1;if(-1===t.indexOf("charset")){var r=exports.charset(t);r&&(t+="; charset="+r.toLowerCase())}return t},exports.extension=function(e){if(!e||"string"!=typeof e)return!1;var t=r.exec(e),n=t&&exports.extensions[t[1].toLowerCase()];if(!n||!n.length)return!1;return n[0]},exports.extensions=Object.create(null),exports.lookup=function(e){if(!e||"string"!=typeof e)return!1;var r=t("x."+e).toLowerCase().substr(1);if(!r)return!1;return exports.types[r]||!1},exports.types=Object.create(null),function(t,r){var n=["nginx","apache",void 0,"iana"];Object.keys(e).forEach(function(s){var o=e[s],i=o.extensions;if(i&&i.length){t[s]=i;for(var a=0;a<i.length;a++){var c=i[a];if(r[c]){var p=n.indexOf(e[r[c]].source),u=n.indexOf(o.source);if("application/octet-stream"!==r[c]&&(p>u||p===u&&"application/"===r[c].substr(0,12)))continue}r[c]=s}}})}(exports.extensions,exports.types);