(function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.URI=e.URI||{})})(this,function(e){"use strict";function r(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length>1){r[0]=r[0].slice(0,-1);for(var n=r.length-1,o=1;o<n;++o)r[o]=r[o].slice(1,-1);return r[n]=r[n].slice(1),r.join("")}return r[0]}function t(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function a(e){var n=r("[0-9]","[A-Fa-f]"),o=t(t("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+t("%[89A-Fa-f]"+n+"%"+n+n)+"|"+t("%"+n+n)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=r("[\\:\\/\\?\\#\\[\\]\\@]",a),s=e?"[\\uE000-\\uF8FF]":"[]",u=r("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=t("[A-Za-z]"+r("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),p=t(t(o+"|"+r(u,a,"[\\:]"))+"*"),h=(t(t("25[0-5]")+"|"+t("2[0-4][0-9]")+"|"+t("1[0-9][0-9]")+"|"+t("[1-9][0-9]")+"|[0-9]"),t(t("25[0-5]")+"|"+t("2[0-4][0-9]")+"|"+t("1[0-9][0-9]")+"|"+t("0?[1-9][0-9]")+"|0?0?[0-9]")),f=t(h+"\\."+h+"\\."+h+"\\."+h),l=t(n+"{1,4}"),v=t(t(l+"\\:"+l)+"|"+f),d=t([t(t(l+"\\:")+"{6}"+v),t("\\:\\:"+t(l+"\\:")+"{5}"+v),t(t(l)+"?\\:\\:"+t(l+"\\:")+"{4}"+v),t(t(t(l+"\\:")+"{0,1}"+l)+"?\\:\\:"+t(l+"\\:")+"{3}"+v),t(t(t(l+"\\:")+"{0,2}"+l)+"?\\:\\:"+t(l+"\\:")+"{2}"+v),t(t(t(l+"\\:")+"{0,3}"+l)+"?\\:\\:"+l+"\\:"+v),t(t(t(l+"\\:")+"{0,4}"+l)+"?\\:\\:"+v),t(t(t(l+"\\:")+"{0,5}"+l)+"?\\:\\:"+l),t(t(t(l+"\\:")+"{0,6}"+l)+"?\\:\\:")].join("|")),g=t(t(u+"|"+o)+"+"),m=(t(d+"\\%25"+g),t("\\["+t(t(d+t("\\%25|\\%(?!"+n+"{2})")+g)+"|"+d+"|"+t("[vV]"+n+"+\\."+r(u,a,"[\\:]")+"+"))+"\\]")),E=t(t(o+"|"+r(u,a))+"*"),C=t(m+"|"+f+"(?!"+E+")|"+E),y=t("[0-9]*"),S=t(t(p+"@")+"?"+C+t("\\:"+y)+"?"),A=t(o+"|"+r(u,a,"[\\:\\@]")),D=t(A+"*"),w=t(A+"+"),b=t(t(o+"|"+r(u,a,"[\\@]"))+"+"),x=t(t("\\/"+D)+"*"),O=t("\\/"+t(w+x)+"?"),I=t(b+x),F=t(w+x),N="(?!"+A+")",R=(t(x+"|"+O+"|"+I+"|"+F+"|"+N),t(t(A+"|"+r("[\\/\\?]",s))+"*")),T=t(t(A+"|[\\/\\?]")+"*"),_=t(t("\\/\\/"+S+x)+"|"+O+"|"+F+"|"+N);t(t(c+"\\:"+_+t("\\?"+R)+"?"+t("\\#"+T)+"?")+"|"+t(t(t("\\/\\/"+S+x)+"|"+O+"|"+I+"|"+N)+t("\\?"+R)+"?"+t("\\#"+T)+"?")),t(c+"\\:"+_+t("\\?"+R)+"?"),t(t("\\/\\/("+t("("+p+")@")+"?("+C+")"+t("\\:("+y+")")+"?)")+"?("+x+"|"+O+"|"+F+"|"+N+")"),t("\\?("+R+")"),t("\\#("+T+")"),t(t("\\/\\/("+t("("+p+")@")+"?("+C+")"+t("\\:("+y+")")+"?)")+"?("+x+"|"+O+"|"+I+"|"+N+")"),t("\\?("+R+")"),t("\\#("+T+")"),t(t("\\/\\/("+t("("+p+")@")+"?("+C+")"+t("\\:("+y+")")+"?)")+"?("+x+"|"+O+"|"+F+"|"+N+")"),t("\\?("+R+")"),t("\\#("+T+")"),t("("+p+")@"),t("\\:("+y+")");return{NOT_SCHEME:new RegExp(r("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(r("[^\\%]",u,a,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",u,i),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+d+")"+t(t("\\%25|\\%(?!"+n+"{2})")+"("+g+")")+"?\\]?$")}}var i=a(!1),s=a(!0),u=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=2147483647,p=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,d=String.fromCharCode;function g(e){throw new RangeError(l[e])}function m(e,r){var t=e.split("@"),n="";t.length>1&&(n=t[0]+"@",e=t[1]);var o=function(e,r){for(var t=[],n=e.length;n--;)t[n]=r(e[n]);return t}((e=e.replace(f,".")).split("."),r).join(".");return n+o}function E(e){for(var r=[],t=0,n=e.length;t<n;){var o=e.charCodeAt(t++);if(o>=55296&&o<=56319&&t<n){var a=e.charCodeAt(t++);56320==(64512&a)?r.push(((1023&o)<<10)+(1023&a)+65536):(r.push(o),t--)}else r.push(o)}return r}var C=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36},y=function(e,r){return e+22+75*(e<26)-((0!=r)<<5)},S=function(e,r,t){var n=0;for(e=t?v(e/700):e>>1,e+=v(e/r);e>455;n+=36)e=v(e/35);return v(n+36*e/(e+38))},A=function(e){var r=[],t=e.length,n=0,o=128,a=72,i=e.lastIndexOf("-");i<0&&(i=0);for(var s=0;s<i;++s)e.charCodeAt(s)>=128&&g("not-basic"),r.push(e.charCodeAt(s));for(var u=i>0?i+1:0;u<t;){for(var p=n,h=1,f=36;;f+=36){u>=t&&g("invalid-input");var l=C(e.charCodeAt(u++));(l>=36||l>v((c-n)/h))&&g("overflow"),n+=l*h;var d=f<=a?1:f>=a+26?26:f-a;if(l<d)break;var m=36-d;h>v(c/m)&&g("overflow"),h*=m}var E=r.length+1;a=S(n-p,E,0==p),v(n/E)>c-o&&g("overflow"),o+=v(n/E),n%=E,r.splice(n++,0,o)}return String.fromCodePoint.apply(String,r)},D=function(e){var r=[],t=(e=E(e)).length,n=128,o=0,a=72,i=!0,s=!1,u=void 0;try{for(var p,h=e[Symbol.iterator]();!(i=(p=h.next()).done);i=!0){var f=p.value;f<128&&r.push(d(f))}}catch(e){s=!0,u=e}finally{try{!i&&h.return&&h.return()}finally{if(s)throw u}}var l=r.length,m=l;for(l&&r.push("-");m<t;){var C=c,A=!0,D=!1,w=void 0;try{for(var b,x=e[Symbol.iterator]();!(A=(b=x.next()).done);A=!0){var O=b.value;O>=n&&O<C&&(C=O)}}catch(e){D=!0,w=e}finally{try{!A&&x.return&&x.return()}finally{if(D)throw w}}var I=m+1;C-n>v((c-o)/I)&&g("overflow"),o+=(C-n)*I,n=C;var F=!0,N=!1,R=void 0;try{for(var T,_=e[Symbol.iterator]();!(F=(T=_.next()).done);F=!0){var P=T.value;if(P<n&&++o>c&&g("overflow"),P==n){for(var U=o,j=36;;j+=36){var q=j<=a?1:j>=a+26?26:j-a;if(U<q)break;var H=U-q,z=36-q;r.push(d(y(q+H%z,0))),U=v(H/z)}r.push(d(y(U,0))),a=S(o,I,m==l),o=0,++m}}}catch(e){N=!0,R=e}finally{try{!F&&_.return&&_.return()}finally{if(N)throw R}}++o,++n}return r.join("")},w={version:"2.1.0",ucs2:{decode:E,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(e))}},decode:A,encode:D,toASCII:function(e){return m(e,function(e){return h.test(e)?"xn--"+D(e):e})},toUnicode:function(e){return m(e,function(e){return p.test(e)?A(e.slice(4).toLowerCase()):e})}},b={};function x(e){var r=e.charCodeAt(0);return r<16?"%0"+r.toString(16).toUpperCase():r<128?"%"+r.toString(16).toUpperCase():r<2048?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()}function O(e){for(var r="",t=0,n=e.length;t<n;){var o=parseInt(e.substr(t+1,2),16);if(o<128)r+=String.fromCharCode(o),t+=3;else if(o>=194&&o<224){if(n-t>=6){var a=parseInt(e.substr(t+4,2),16);r+=String.fromCharCode((31&o)<<6|63&a)}else r+=e.substr(t,6);t+=6}else if(o>=224){if(n-t>=9){var i=parseInt(e.substr(t+4,2),16),s=parseInt(e.substr(t+7,2),16);r+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}else r+=e.substr(t,9);t+=9}else r+=e.substr(t,3),t+=3}return r}function I(e,r){function t(e){var t=O(e);return t.match(r.UNRESERVED)?t:e}return e.scheme&&(e.scheme=String(e.scheme).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(r.PCT_ENCODED,t).replace(r.NOT_USERINFO,x).replace(r.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_HOST,x).replace(r.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(r.PCT_ENCODED,t).replace(e.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,x).replace(r.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(r.PCT_ENCODED,t).replace(r.NOT_QUERY,x).replace(r.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(r.PCT_ENCODED,t).replace(r.NOT_FRAGMENT,x).replace(r.PCT_ENCODED,o)),e}function F(e){return e.replace(/^0*(.*)/,"$1")||"0"}function N(e,r){var t=e.match(r.IPV4ADDRESS)||[],n=u(t,2)[1];return n?n.split(".").map(F).join("."):e}function R(e,r){var t=e.match(r.IPV6ADDRESS)||[],n=u(t,3),o=n[1],a=n[2];if(o){for(var i=o.toLowerCase().split("::").reverse(),s=u(i,2),c=s[0],p=s[1],h=p?p.split(":").map(F):[],f=c.split(":").map(F),l=r.IPV4ADDRESS.test(f[f.length-1]),v=l?7:8,d=f.length-v,g=Array(v),m=0;m<v;++m)g[m]=h[m]||f[d+m]||"";l&&(g[v-1]=N(g[v-1],r));var E=g.reduce(function(e,r,t){if(!r||"0"===r){var n=e[e.length-1];n&&n.index+n.length===t?n.length++:e.push({index:t,length:1})}return e},[]).sort(function(e,r){return r.length-e.length})[0],C=void 0;if(E&&E.length>1){var y=g.slice(0,E.index),S=g.slice(E.index+E.length);C=y.join(":")+"::"+S.join(":")}else C=g.join(":");return a&&(C+="%"+a),C}return e}var T=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_=void 0==="".match(/(){0}/)[1];function P(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={},n=!1!==r.iri?s:i;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);var o=e.match(T);if(o){_?(t.scheme=o[1],t.userinfo=o[3],t.host=o[4],t.port=parseInt(o[5],10),t.path=o[6]||"",t.query=o[7],t.fragment=o[8],isNaN(t.port)&&(t.port=o[5])):(t.scheme=o[1]||void 0,t.userinfo=-1!==e.indexOf("@")?o[3]:void 0,t.host=-1!==e.indexOf("//")?o[4]:void 0,t.port=parseInt(o[5],10),t.path=o[6]||"",t.query=-1!==e.indexOf("?")?o[7]:void 0,t.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(t.port)&&(t.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),t.host&&(t.host=R(N(t.host,n),n)),void 0!==t.scheme||void 0!==t.userinfo||void 0!==t.host||void 0!==t.port||t.path||void 0!==t.query?void 0===t.scheme?t.reference="relative":void 0===t.fragment?t.reference="absolute":t.reference="uri":t.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==t.reference&&(t.error=t.error||"URI is not a "+r.reference+" reference.");var a=b[(r.scheme||t.scheme||"").toLowerCase()];if(r.unicodeSupport||a&&a.unicodeSupport)I(t,n);else{if(t.host&&(r.domainHost||a&&a.domainHost))try{t.host=w.toASCII(t.host.replace(n.PCT_ENCODED,O).toLowerCase())}catch(e){t.error=t.error||"Host's domain name can not be converted to ASCII via punycode: "+e}I(t,i)}a&&a.parse&&a.parse(t,r)}else t.error=t.error||"URI can not be parsed.";return t}var U=/^\.\.?\//,j=/^\/\.(\/|$)/,q=/^\/\.\.(\/|$)/,H=/^\/?(?:.|\n)*?(?=\/|$)/;function z(e){for(var r=[];e.length;)if(e.match(U))e=e.replace(U,"");else if(e.match(j))e=e.replace(j,"/");else if(e.match(q))e=e.replace(q,"/"),r.pop();else if("."===e||".."===e)e="";else{var t=e.match(H);if(!t)throw new Error("Unexpected dot segment condition");var n=t[0];e=e.slice(n.length),r.push(n)}return r.join("")}function L(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.iri?s:i,n=[],o=b[(r.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,r),e.host)if(t.IPV6ADDRESS.test(e.host));else if(r.domainHost||o&&o.domainHost)try{e.host=r.iri?w.toUnicode(e.host):w.toASCII(e.host.replace(t.PCT_ENCODED,O).toLowerCase())}catch(t){e.error=e.error||"Host's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+t}I(e,t),"suffix"!==r.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var a=function(e,r){var t=!1!==r.iri?s:i,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(R(N(String(e.host),t),t).replace(t.IPV6ADDRESS,function(e,r,t){return"["+r+(t?"%25"+t:"")+"]"})),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}(e,r);if(void 0!==a&&("suffix"!==r.reference&&n.push("//"),n.push(a),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;r.absolutePath||o&&o.absolutePath||(u=z(u)),void 0===a&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function $(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=P(L(e,t),t),r=P(L(r,t),t)),!(t=t||{}).tolerant&&r.scheme?(n.scheme=r.scheme,n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=z(r.path||""),n.query=r.query):(void 0!==r.userinfo||void 0!==r.host||void 0!==r.port?(n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=z(r.path||""),n.query=r.query):(r.path?("/"===r.path.charAt(0)?n.path=z(r.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+r.path:n.path=r.path:n.path="/"+r.path,n.path=z(n.path)),n.query=r.query):(n.path=e.path,void 0!==r.query?n.query=r.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=r.fragment,n}function V(e,r){return e&&e.toString().replace(r&&r.iri?s.PCT_ENCODED:i.PCT_ENCODED,O)}var M={scheme:"http",domainHost:!0,parse:function(e,r){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,r){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Z={scheme:"https",domainHost:M.domainHost,parse:M.parse,serialize:M.serialize},k={},G="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",Y=t(t("%[EFef][0-9A-Fa-f]%"+Q+Q+"%"+Q+Q)+"|"+t("%[89A-Fa-f][0-9A-Fa-f]%"+Q+Q)+"|"+t("%"+Q+Q)),B=r("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(G,"g"),K=new RegExp(Y,"g"),W=new RegExp(r("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',B),"g"),X=new RegExp(r("[^]",G,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),ee=X;function re(e){var r=O(e);return r.match(J)?r:e}var te={scheme:"mailto",parse:function(e,r){var t=e,n=t.to=t.path?t.path.split(","):[];if(t.path=void 0,t.query){for(var o=!1,a={},i=t.query.split("&"),s=0,u=i.length;s<u;++s){var c=i[s].split("=");switch(c[0]){case"to":for(var p=c[1].split(","),h=0,f=p.length;h<f;++h)n.push(p[h]);break;case"subject":t.subject=V(c[1],r);break;case"body":t.body=V(c[1],r);break;default:o=!0,a[V(c[0],r)]=V(c[1],r)}}o&&(t.headers=a)}t.query=void 0;for(var l=0,v=n.length;l<v;++l){var d=n[l].split("@");if(d[0]=V(d[0]),r.unicodeSupport)d[1]=V(d[1],r).toLowerCase();else try{d[1]=w.toASCII(V(d[1],r).toLowerCase())}catch(e){t.error=t.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[l]=d.join("@")}return t},serialize:function(e,r){var t=e,n=function(e){return void 0!==e&&null!==e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(n){for(var a=0,i=n.length;a<i;++a){var s=String(n[a]),u=s.lastIndexOf("@"),c=s.slice(0,u).replace(K,re).replace(K,o).replace(W,x),p=s.slice(u+1);try{p=r.iri?w.toUnicode(p):w.toASCII(V(p,r).toLowerCase())}catch(e){t.error=t.error||"Email address's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+e}n[a]=c+"@"+p}t.path=n.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var f=[];for(var l in h)h[l]!==k[l]&&f.push(l.replace(K,re).replace(K,o).replace(X,x)+"="+h[l].replace(K,re).replace(K,o).replace(ee,x));return f.length&&(t.query=f.join("&")),t}},ne=/^([^\:]+)\:(.*)/,oe={scheme:"urn",parse:function(e,r){var t=e.path&&e.path.match(ne),n=e;if(t){var o=r.scheme||n.scheme||"urn",a=t[1].toLowerCase(),i=t[2],s=o+":"+(r.nid||a),u=b[s];n.nid=a,n.nss=i,n.path=void 0,u&&(n=u.parse(n,r))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,r){var t=r.scheme||e.scheme||"urn",n=e.nid,o=t+":"+(r.nid||n),a=b[o];a&&(e=a.serialize(e,r));var i=e,s=e.nss;return i.path=(n||r.nid)+":"+s,i}},ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ie={scheme:"urn:uuid",parse:function(e,r){var t=e;return t.uuid=t.nss,t.nss=void 0,r.tolerant||t.uuid&&t.uuid.match(ae)||(t.error=t.error||"UUID is not valid."),t},serialize:function(e,r){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t}};b[M.scheme]=M,b[Z.scheme]=Z,b[te.scheme]=te,b[oe.scheme]=oe,b[ie.scheme]=ie,e.SCHEMES=b,e.pctEncChar=x,e.pctDecChars=O,e.parse=P,e.removeDotSegments=z,e.serialize=L,e.resolveComponents=$,e.resolve=function(e,r,t){var n=function(e,r){var t=e;if(r)for(var n in r)t[n]=r[n];return t}({scheme:"null"},t);return L($(P(e,n),P(r,n),n,!0),n)},e.normalize=function(e,r){return"string"==typeof e?e=L(P(e,r),r):"object"===n(e)&&(e=P(L(e,r),r)),e},e.equal=function(e,r,t){return"string"==typeof e?e=L(P(e,t),t):"object"===n(e)&&(e=L(e,t)),"string"==typeof r?r=L(P(r,t),t):"object"===n(r)&&(r=L(r,t)),e===r},e.escapeComponent=function(e,r){return e&&e.toString().replace(r&&r.iri?s.ESCAPE:i.ESCAPE,x)},e.unescapeComponent=V,Object.defineProperty(e,"__esModule",{value:!0})});