if(void 0===e)var e=require("../dist/es5/uri.all");test("Acquire URI",function(){ok(e)}),test("URI Parsing",function(){var t;t=e.parse("uri:"),strictEqual(t.error,void 0,"scheme errors"),strictEqual(t.scheme,"uri","scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//@"),strictEqual(t.error,void 0,"userinfo errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,"","userinfo"),strictEqual(t.host,"","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//"),strictEqual(t.error,void 0,"host errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//:"),strictEqual(t.error,void 0,"port errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"","host"),strictEqual(t.port,"","port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse(""),strictEqual(t.error,void 0,"path errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("?"),strictEqual(t.error,void 0,"query errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,"","query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("#"),strictEqual(t.error,void 0,"fragment errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,"","fragment"),t=e.parse("#\t"),strictEqual(t.error,void 0,"path errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,"%09","fragment"),t=e.parse("#\n"),strictEqual(t.error,void 0,"path errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,"%0A","fragment"),t=e.parse("#\v"),strictEqual(t.error,void 0,"path errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,"%0B","fragment"),t=e.parse("#\f"),strictEqual(t.error,void 0,"path errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,"%0C","fragment"),t=e.parse("#\r"),strictEqual(t.error,void 0,"path errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,"%0D","fragment"),t=e.parse("uri://user:pass@example.com:123/one/two.three?q1=a1&q2=a2#body"),strictEqual(t.error,void 0,"all errors"),strictEqual(t.scheme,"uri","scheme"),strictEqual(t.userinfo,"user:pass","userinfo"),strictEqual(t.host,"example.com","host"),strictEqual(t.port,123,"port"),strictEqual(t.path,"/one/two.three","path"),strictEqual(t.query,"q1=a1&q2=a2","query"),strictEqual(t.fragment,"body","fragment"),t=e.parse("//10.10.10.10"),strictEqual(t.error,void 0,"IPv4address errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"10.10.10.10","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//[2001:db8::7]"),strictEqual(t.error,void 0,"IPv4address errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"2001:db8::7","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//[::ffff:129.144.52.38]"),strictEqual(t.error,void 0,"IPv4address errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"::ffff:129.144.52.38","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("uri://10.10.10.10.example.com/en/process"),strictEqual(t.error,void 0,"mixed errors"),strictEqual(t.scheme,"uri","scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"10.10.10.10.example.com","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"/en/process","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//[2606:2800:220:1:248:1893:25c8:1946]/test"),strictEqual(t.error,void 0,"IPv6address errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"2606:2800:220:1:248:1893:25c8:1946","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"/test","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//[2001:db8::1]:80"),strictEqual(t.error,void 0,"IPv6address errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"2001:db8::1","host"),strictEqual(t.port,80,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//[fe80::a%25en1]"),strictEqual(t.error,void 0,"IPv4address errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"fe80::a%en1","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),t=e.parse("//[2001:db8::7%en0]"),strictEqual(t.error,void 0,"IPv6address interface errors"),strictEqual(t.scheme,void 0,"scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,"2001:db8::7%en0","host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,"","path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment")}),test("URI Serialization",function(){var t={scheme:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0};strictEqual(e.serialize(t),"","Undefined Components"),t={scheme:"",userinfo:"",host:"",port:0,path:"",query:"",fragment:""},strictEqual(e.serialize(t),"//@:0?#","Empty Components"),t={scheme:"uri",userinfo:"foo:bar",host:"example.com",port:1,path:"path",query:"query",fragment:"fragment"},strictEqual(e.serialize(t),"uri://foo:bar@example.com:1/path?query#fragment","All Components"),strictEqual(e.serialize({path:"//path"}),"/%2Fpath","Double slash path"),strictEqual(e.serialize({path:"foo:bar"}),"foo%3Abar","Colon path"),strictEqual(e.serialize({path:"?query"}),"%3Fquery","Query path"),strictEqual(e.serialize({host:"10.10.10.10.example.com"}),"//10.10.10.10.example.com","Mixed IPv4address & reg-name"),strictEqual(e.serialize({host:"2001:db8::7"}),"//[2001:db8::7]","IPv6 Host"),strictEqual(e.serialize({host:"::ffff:129.144.52.38"}),"//[::ffff:129.144.52.38]","IPv6 Mixed Host"),strictEqual(e.serialize({host:"2606:2800:220:1:248:1893:25c8:1946"}),"//[2606:2800:220:1:248:1893:25c8:1946]","IPv6 Full Host"),strictEqual(e.serialize({host:"fe80::a%en1"}),"//[fe80::a%25en1]","IPv6 Zone Unescaped Host"),strictEqual(e.serialize({host:"fe80::a%25en1"}),"//[fe80::a%25en1]","IPv6 Zone Escaped Host")}),test("URI Resolving",function(){var t="uri://a/b/c/d;p?q";strictEqual(e.resolve(t,"g:h"),"g:h","g:h"),strictEqual(e.resolve(t,"g:h"),"g:h","g:h"),strictEqual(e.resolve(t,"g"),"uri://a/b/c/g","g"),strictEqual(e.resolve(t,"./g"),"uri://a/b/c/g","./g"),strictEqual(e.resolve(t,"g/"),"uri://a/b/c/g/","g/"),strictEqual(e.resolve(t,"/g"),"uri://a/g","/g"),strictEqual(e.resolve(t,"//g"),"uri://g","//g"),strictEqual(e.resolve(t,"?y"),"uri://a/b/c/d;p?y","?y"),strictEqual(e.resolve(t,"g?y"),"uri://a/b/c/g?y","g?y"),strictEqual(e.resolve(t,"#s"),"uri://a/b/c/d;p?q#s","#s"),strictEqual(e.resolve(t,"g#s"),"uri://a/b/c/g#s","g#s"),strictEqual(e.resolve(t,"g?y#s"),"uri://a/b/c/g?y#s","g?y#s"),strictEqual(e.resolve(t,";x"),"uri://a/b/c/;x",";x"),strictEqual(e.resolve(t,"g;x"),"uri://a/b/c/g;x","g;x"),strictEqual(e.resolve(t,"g;x?y#s"),"uri://a/b/c/g;x?y#s","g;x?y#s"),strictEqual(e.resolve(t,""),"uri://a/b/c/d;p?q",""),strictEqual(e.resolve(t,"."),"uri://a/b/c/","."),strictEqual(e.resolve(t,"./"),"uri://a/b/c/","./"),strictEqual(e.resolve(t,".."),"uri://a/b/",".."),strictEqual(e.resolve(t,"../"),"uri://a/b/","../"),strictEqual(e.resolve(t,"../g"),"uri://a/b/g","../g"),strictEqual(e.resolve(t,"../.."),"uri://a/","../.."),strictEqual(e.resolve(t,"../../"),"uri://a/","../../"),strictEqual(e.resolve(t,"../../g"),"uri://a/g","../../g"),strictEqual(e.resolve(t,"../../../g"),"uri://a/g","../../../g"),strictEqual(e.resolve(t,"../../../../g"),"uri://a/g","../../../../g"),strictEqual(e.resolve(t,"/./g"),"uri://a/g","/./g"),strictEqual(e.resolve(t,"/../g"),"uri://a/g","/../g"),strictEqual(e.resolve(t,"g."),"uri://a/b/c/g.","g."),strictEqual(e.resolve(t,".g"),"uri://a/b/c/.g",".g"),strictEqual(e.resolve(t,"g.."),"uri://a/b/c/g..","g.."),strictEqual(e.resolve(t,"..g"),"uri://a/b/c/..g","..g"),strictEqual(e.resolve(t,"./../g"),"uri://a/b/g","./../g"),strictEqual(e.resolve(t,"./g/."),"uri://a/b/c/g/","./g/."),strictEqual(e.resolve(t,"g/./h"),"uri://a/b/c/g/h","g/./h"),strictEqual(e.resolve(t,"g/../h"),"uri://a/b/c/h","g/../h"),strictEqual(e.resolve(t,"g;x=1/./y"),"uri://a/b/c/g;x=1/y","g;x=1/./y"),strictEqual(e.resolve(t,"g;x=1/../y"),"uri://a/b/c/y","g;x=1/../y"),strictEqual(e.resolve(t,"g?y/./x"),"uri://a/b/c/g?y/./x","g?y/./x"),strictEqual(e.resolve(t,"g?y/../x"),"uri://a/b/c/g?y/../x","g?y/../x"),strictEqual(e.resolve(t,"g#s/./x"),"uri://a/b/c/g#s/./x","g#s/./x"),strictEqual(e.resolve(t,"g#s/../x"),"uri://a/b/c/g#s/../x","g#s/../x"),strictEqual(e.resolve(t,"uri:g"),"uri:g","uri:g"),strictEqual(e.resolve(t,"uri:g",{tolerant:!0}),"uri://a/b/c/g","uri:g"),strictEqual(e.resolve("//www.g.com/","/adf\ngf"),"//www.g.com/adf%0Agf","/adf\\ngf"),strictEqual(e.resolve("//www.g.com/error\n/bleh/bleh",".."),"//www.g.com/error%0A/","//www.g.com/error\\n/bleh/bleh")}),test("URI Normalizing",function(){strictEqual(e.normalize("uri://www.example.org/red%09rosé#red"),"uri://www.example.org/red%09ros%C3%A9#red"),strictEqual(e.normalize("//192.068.001.000"),"//192.68.1.0"),strictEqual(e.normalize("http://[1080::8:800:200C:417A]/"),"http://[1080::8:800:200c:417a]/"),strictEqual(e.normalize("//[2001:0db8::0001]/"),"//[2001:db8::1]/"),strictEqual(e.normalize("//[2001:db8::1:0000:1]/"),"//[2001:db8::1:0:1]/"),strictEqual(e.normalize("//[2001:db8:0:0:0:0:2:1]/"),"//[2001:db8::2:1]/"),strictEqual(e.normalize("//[2001:db8:0:1:1:1:1:1]/"),"//[2001:db8:0:1:1:1:1:1]/"),strictEqual(e.normalize("//[2001:0:0:1:0:0:0:1]/"),"//[2001:0:0:1::1]/"),strictEqual(e.normalize("//[2001:db8:0:0:1:0:0:1]/"),"//[2001:db8::1:0:0:1]/"),strictEqual(e.normalize("//[2001:DB8::1]/"),"//[2001:db8::1]/"),strictEqual(e.normalize("//[0:0:0:0:0:ffff:192.0.2.1]/"),"//[::ffff:192.0.2.1]/"),strictEqual(e.normalize("//[1:2:3:4:5:6:192.0.2.1]/"),"//[1:2:3:4:5:6:192.0.2.1]/"),strictEqual(e.normalize("//[1:2:3:4:5:6:192.068.001.000]/"),"//[1:2:3:4:5:6:192.68.1.0]/")}),test("URI Equals",function(){strictEqual(e.equal("example://a/b/c/%7Bfoo%7D","eXAMPLE://a/./b/../b/%63/%7bfoo%7d"),!0),strictEqual(e.equal("http://example.org/~user","http://example.org/%7euser"),!0)}),test("Escape Component",function(){for(var t,r=0;r<=129;++r)(t=String.fromCharCode(r)).match(/[\$\&\+\,\;\=]/)?strictEqual(e.escapeComponent(t),t):strictEqual(e.escapeComponent(t),encodeURIComponent(t));strictEqual(e.escapeComponent("À"),encodeURIComponent("À")),strictEqual(e.escapeComponent("߿"),encodeURIComponent("߿")),strictEqual(e.escapeComponent("ࠀ"),encodeURIComponent("ࠀ")),strictEqual(e.escapeComponent("ア"),encodeURIComponent("ア"))}),test("Unescape Component",function(){for(var t,r=0;r<=129;++r)t=String.fromCharCode(r),strictEqual(e.unescapeComponent(encodeURIComponent(t)),t);strictEqual(e.unescapeComponent(encodeURIComponent("À")),"À"),strictEqual(e.unescapeComponent(encodeURIComponent("߿")),"߿"),strictEqual(e.unescapeComponent(encodeURIComponent("ࠀ")),"ࠀ"),strictEqual(e.unescapeComponent(encodeURIComponent("ア")),"ア")});var t={iri:!0,unicodeSupport:!0};test("IRI Parsing",function(){var r=e.parse("uri://us er:pa퟿ss@example.com:123/o豈ne/t﷏wo.tﷰhree?q1=a1&q2=a2#bo￯dy",t);strictEqual(r.error,void 0,"all errors"),strictEqual(r.scheme,"uri","scheme"),strictEqual(r.userinfo,"us er:pa퟿ss","userinfo"),strictEqual(r.host,"example.com","host"),strictEqual(r.port,123,"port"),strictEqual(r.path,"/o豈ne/t﷏wo.tﷰhree","path"),strictEqual(r.query,"q1=a1&q2=a2","query"),strictEqual(r.fragment,"bo￯dy","fragment")}),test("IRI Serialization",function(){strictEqual(e.serialize({scheme:"uri",userinfo:"us er:pa퟿ss",host:"example.com",port:123,path:"/o豈ne/t﷏wo.tﷰhree",query:"q1=a1&q2=a2",fragment:"bo￯dy"},t),"uri://us er:pa퟿ss@example.com:123/o豈ne/t﷏wo.tﷰhree?q1=a1&q2=a2#bo￯dy%EE%80%81")}),test("IRI Normalizing",function(){strictEqual(e.normalize("uri://www.example.org/red%09rosé#red",t),"uri://www.example.org/red%09rosé#red")}),test("IRI Equals",function(){strictEqual(e.equal("example://a/b/c/%7Bfoo%7D/rosé","eXAMPLE://a/./b/../b/%63/%7bfoo%7d/ros%C3%A9",t),!0)}),test("Convert IRI to URI",function(){strictEqual(e.serialize(e.parse("uri://www.example.org/red%09rosé#red",t)),"uri://www.example.org/red%09ros%C3%A9#red"),strictEqual(e.serialize(e.parse("uri://résumé.example.org",{iri:!0,domainHost:!0}),{domainHost:!0}),"uri://xn--rsum-bpad.example.org")}),test("Convert URI to IRI",function(){strictEqual(e.serialize(e.parse("uri://www.example.org/D%C3%BCrst"),t),"uri://www.example.org/Dürst"),strictEqual(e.serialize(e.parse("uri://www.example.org/D%FCrst"),t),"uri://www.example.org/D%FCrst"),strictEqual(e.serialize(e.parse("uri://xn--99zt52a.example.org/%e2%80%ae"),t),"uri://xn--99zt52a.example.org/%E2%80%AE"),strictEqual(e.serialize(e.parse("uri://xn--rsum-bpad.example.org",{domainHost:!0}),{iri:!0,domainHost:!0}),"uri://résumé.example.org")}),e.SCHEMES.http&&test("HTTP Equals",function(){strictEqual(e.equal("http://abc.com:80/~smith/home.html","http://abc.com/~smith/home.html"),!0),strictEqual(e.equal("http://ABC.com/%7Esmith/home.html","http://abc.com/~smith/home.html"),!0),strictEqual(e.equal("http://ABC.com:/%7esmith/home.html","http://abc.com/~smith/home.html"),!0),strictEqual(e.equal("HTTP://ABC.COM","http://abc.com/"),!0),strictEqual(e.equal("http://example.com:/","http://example.com:80/"),!0)}),e.SCHEMES.https&&test("HTTPS Equals",function(){strictEqual(e.equal("https://example.com","https://example.com:443/"),!0),strictEqual(e.equal("https://example.com:/","https://example.com:443/"),!0)}),e.SCHEMES.urn&&(test("URN Parsing",function(){var t=e.parse("urn:foo:a123,456");strictEqual(t.error,void 0,"errors"),strictEqual(t.scheme,"urn","scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,void 0,"path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),strictEqual(t.nid,"foo","nid"),strictEqual(t.nss,"a123,456","nss")}),test("URN Serialization",function(){strictEqual(e.serialize({scheme:"urn",nid:"foo",nss:"a123,456"}),"urn:foo:a123,456")}),test("URN Equals",function(){strictEqual(e.equal("urn:foo:a123,456","urn:foo:a123,456"),!0),strictEqual(e.equal("urn:foo:a123,456","URN:foo:a123,456"),!0),strictEqual(e.equal("urn:foo:a123,456","urn:FOO:a123,456"),!0),strictEqual(e.equal("urn:foo:a123,456","urn:foo:A123,456"),!1),strictEqual(e.equal("urn:foo:a123%2C456","URN:FOO:a123%2c456"),!0)}),test("URN Resolving",function(){strictEqual(e.resolve("","urn:some:ip:prop"),"urn:some:ip:prop"),strictEqual(e.resolve("#","urn:some:ip:prop"),"urn:some:ip:prop"),strictEqual(e.resolve("urn:some:ip:prop","urn:some:ip:prop"),"urn:some:ip:prop"),strictEqual(e.resolve("urn:some:other:prop","urn:some:ip:prop"),"urn:some:ip:prop")}),test("UUID Parsing",function(){var t=e.parse("urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6");strictEqual(t.error,void 0,"errors"),strictEqual(t.scheme,"urn","scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,void 0,"path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),strictEqual(t.nid,"uuid","nid"),strictEqual(t.nss,void 0,"nss"),strictEqual(t.uuid,"f81d4fae-7dec-11d0-a765-00a0c91e6bf6","uuid"),t=e.parse("urn:uuid:notauuid-7dec-11d0-a765-00a0c91e6bf6"),notStrictEqual(t.error,void 0,"errors")}),test("UUID Serialization",function(){var t={scheme:"urn",nid:"uuid",uuid:"f81d4fae-7dec-11d0-a765-00a0c91e6bf6"};strictEqual(e.serialize(t),"urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6"),t={scheme:"urn",nid:"uuid",uuid:"notauuid-7dec-11d0-a765-00a0c91e6bf6"},strictEqual(e.serialize(t),"urn:uuid:notauuid-7dec-11d0-a765-00a0c91e6bf6")}),test("UUID Equals",function(){strictEqual(e.equal("URN:UUID:F81D4FAE-7DEC-11D0-A765-00A0C91E6BF6","urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6"),!0)}),test("URN NID Override",function(){var t=e.parse("urn:foo:f81d4fae-7dec-11d0-a765-00a0c91e6bf6",{nid:"uuid"});strictEqual(t.error,void 0,"errors"),strictEqual(t.scheme,"urn","scheme"),strictEqual(t.path,void 0,"path"),strictEqual(t.nid,"foo","nid"),strictEqual(t.nss,void 0,"nss"),strictEqual(t.uuid,"f81d4fae-7dec-11d0-a765-00a0c91e6bf6","uuid");t={scheme:"urn",nid:"foo",uuid:"f81d4fae-7dec-11d0-a765-00a0c91e6bf6"};strictEqual(e.serialize(t,{nid:"uuid"}),"urn:foo:f81d4fae-7dec-11d0-a765-00a0c91e6bf6")})),e.SCHEMES.mailto&&(test("Mailto Parse",function(){var t;t=e.parse("mailto:chris@example.com"),strictEqual(t.error,void 0,"error"),strictEqual(t.scheme,"mailto","scheme"),strictEqual(t.userinfo,void 0,"userinfo"),strictEqual(t.host,void 0,"host"),strictEqual(t.port,void 0,"port"),strictEqual(t.path,void 0,"path"),strictEqual(t.query,void 0,"query"),strictEqual(t.fragment,void 0,"fragment"),deepEqual(t.to,["chris@example.com"],"to"),strictEqual(t.subject,void 0,"subject"),strictEqual(t.body,void 0,"body"),strictEqual(t.headers,void 0,"headers"),t=e.parse("mailto:infobot@example.com?subject=current-issue"),deepEqual(t.to,["infobot@example.com"],"to"),strictEqual(t.subject,"current-issue","subject"),t=e.parse("mailto:infobot@example.com?body=send%20current-issue"),deepEqual(t.to,["infobot@example.com"],"to"),strictEqual(t.body,"send current-issue","body"),t=e.parse("mailto:infobot@example.com?body=send%20current-issue%0D%0Asend%20index"),deepEqual(t.to,["infobot@example.com"],"to"),strictEqual(t.body,"send current-issue\r\nsend index","body"),t=e.parse("mailto:list@example.org?In-Reply-To=%3C3469A91.D10AF4C@example.com%3E"),deepEqual(t.to,["list@example.org"],"to"),deepEqual(t.headers,{"In-Reply-To":"<3469A91.D10AF4C@example.com>"},"headers"),t=e.parse("mailto:majordomo@example.com?body=subscribe%20bamboo-l"),deepEqual(t.to,["majordomo@example.com"],"to"),strictEqual(t.body,"subscribe bamboo-l","body"),t=e.parse("mailto:joe@example.com?cc=bob@example.com&body=hello"),deepEqual(t.to,["joe@example.com"],"to"),strictEqual(t.body,"hello","body"),deepEqual(t.headers,{cc:"bob@example.com"},"headers"),t=e.parse("mailto:joe@example.com?cc=bob@example.com?body=hello"),e.VALIDATE_SUPPORT&&ok(t.error,"invalid header fields"),t=e.parse("mailto:gorby%25kremvax@example.com"),deepEqual(t.to,["gorby%kremvax@example.com"],"to gorby%kremvax@example.com"),t=e.parse("mailto:unlikely%3Faddress@example.com?blat=foop"),deepEqual(t.to,["unlikely?address@example.com"],"to unlikely?address@example.com"),deepEqual(t.headers,{blat:"foop"},"headers"),t=e.parse("mailto:Mike%26family@example.org"),deepEqual(t.to,["Mike&family@example.org"],"to Mike&family@example.org"),t=e.parse("mailto:%22not%40me%22@example.org"),deepEqual(t.to,['"not@me"@example.org'],'to "not@me"@example.org'),t=e.parse("mailto:%22oh%5C%5Cno%22@example.org"),deepEqual(t.to,['"oh\\\\no"@example.org'],'to "oh\\\\no"@example.org'),t=e.parse("mailto:%22%5C%5C%5C%22it's%5C%20ugly%5C%5C%5C%22%22@example.org"),deepEqual(t.to,['"\\\\\\"it\'s\\ ugly\\\\\\""@example.org'],'to "\\\\\\"it\'s\\ ugly\\\\\\""@example.org'),t=e.parse("mailto:user@example.org?subject=caf%C3%A9"),deepEqual(t.to,["user@example.org"],"to"),strictEqual(t.subject,"café","subject"),t=e.parse("mailto:user@example.org?subject=%3D%3Futf-8%3FQ%3Fcaf%3DC3%3DA9%3F%3D"),deepEqual(t.to,["user@example.org"],"to"),strictEqual(t.subject,"=?utf-8?Q?caf=C3=A9?=","subject"),t=e.parse("mailto:user@example.org?subject=%3D%3Fiso-8859-1%3FQ%3Fcaf%3DE9%3F%3D"),deepEqual(t.to,["user@example.org"],"to"),strictEqual(t.subject,"=?iso-8859-1?Q?caf=E9?=","subject"),t=e.parse("mailto:user@example.org?subject=caf%C3%A9&body=caf%C3%A9"),deepEqual(t.to,["user@example.org"],"to"),strictEqual(t.subject,"café","subject"),strictEqual(t.body,"café","body"),e.IRI_SUPPORT&&(t=e.parse("mailto:user@%E7%B4%8D%E8%B1%86.example.org?subject=Test&body=NATTO"),deepEqual(t.to,["user@xn--99zt52a.example.org"],"to"),strictEqual(t.subject,"Test","subject"),strictEqual(t.body,"NATTO","body"))}),test("Mailto Serialize",function(){strictEqual(e.serialize({scheme:"mailto",to:["chris@example.com"]}),"mailto:chris@example.com"),strictEqual(e.serialize({scheme:"mailto",to:["infobot@example.com"],body:"current-issue"}),"mailto:infobot@example.com?body=current-issue"),strictEqual(e.serialize({scheme:"mailto",to:["infobot@example.com"],body:"send current-issue"}),"mailto:infobot@example.com?body=send%20current-issue"),strictEqual(e.serialize({scheme:"mailto",to:["infobot@example.com"],body:"send current-issue\r\nsend index"}),"mailto:infobot@example.com?body=send%20current-issue%0D%0Asend%20index"),strictEqual(e.serialize({scheme:"mailto",to:["list@example.org"],headers:{"In-Reply-To":"<3469A91.D10AF4C@example.com>"}}),"mailto:list@example.org?In-Reply-To=%3C3469A91.D10AF4C@example.com%3E"),strictEqual(e.serialize({scheme:"mailto",to:["majordomo@example.com"],body:"subscribe bamboo-l"}),"mailto:majordomo@example.com?body=subscribe%20bamboo-l"),strictEqual(e.serialize({scheme:"mailto",to:["joe@example.com"],headers:{cc:"bob@example.com",body:"hello"}}),"mailto:joe@example.com?cc=bob@example.com&body=hello"),strictEqual(e.serialize({scheme:"mailto",to:["gorby%25kremvax@example.com"]}),"mailto:gorby%25kremvax@example.com"),strictEqual(e.serialize({scheme:"mailto",to:["unlikely%3Faddress@example.com"],headers:{blat:"foop"}}),"mailto:unlikely%3Faddress@example.com?blat=foop"),strictEqual(e.serialize({scheme:"mailto",to:["Mike&family@example.org"]}),"mailto:Mike%26family@example.org"),strictEqual(e.serialize({scheme:"mailto",to:['"not@me"@example.org']}),"mailto:%22not%40me%22@example.org"),strictEqual(e.serialize({scheme:"mailto",to:['"oh\\\\no"@example.org']}),"mailto:%22oh%5C%5Cno%22@example.org"),strictEqual(e.serialize({scheme:"mailto",to:['"\\\\\\"it\'s\\ ugly\\\\\\""@example.org']}),"mailto:%22%5C%5C%5C%22it's%5C%20ugly%5C%5C%5C%22%22@example.org"),strictEqual(e.serialize({scheme:"mailto",to:["user@example.org"],subject:"café"}),"mailto:user@example.org?subject=caf%C3%A9"),strictEqual(e.serialize({scheme:"mailto",to:["user@example.org"],subject:"=?utf-8?Q?caf=C3=A9?="}),"mailto:user@example.org?subject=%3D%3Futf-8%3FQ%3Fcaf%3DC3%3DA9%3F%3D"),strictEqual(e.serialize({scheme:"mailto",to:["user@example.org"],subject:"=?iso-8859-1?Q?caf=E9?="}),"mailto:user@example.org?subject=%3D%3Fiso-8859-1%3FQ%3Fcaf%3DE9%3F%3D"),strictEqual(e.serialize({scheme:"mailto",to:["user@example.org"],subject:"café",body:"café"}),"mailto:user@example.org?subject=caf%C3%A9&body=caf%C3%A9"),e.IRI_SUPPORT&&strictEqual(e.serialize({scheme:"mailto",to:["usér@納豆.example.org"],subject:"Test",body:"NATTO"}),"mailto:us%C3%A9r@xn--99zt52a.example.org?subject=Test&body=NATTO")}),test("Mailto Equals",function(){strictEqual(e.equal("mailto:addr1@an.example,addr2@an.example","mailto:?to=addr1@an.example,addr2@an.example"),!0),strictEqual(e.equal("mailto:?to=addr1@an.example,addr2@an.example","mailto:addr1@an.example?to=addr2@an.example"),!0)}));