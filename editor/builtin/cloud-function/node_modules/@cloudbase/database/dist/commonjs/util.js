"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./constant"),t=require("./geo/index"),i=require("./serverDate/index");class n{}n.formatResDocumentData=(e=>e.map(e=>n.formatField(e))),n.formatField=(i=>{const a=Object.keys(i);let o={};return Array.isArray(i)&&(o=[]),a.forEach(a=>{const r=i[a];let l;switch(n.whichType(r)){case e.FieldType.GeoPoint:l=new t.Point(r.coordinates[0],r.coordinates[1]);break;case e.FieldType.GeoLineString:l=new t.LineString(r.coordinates.map(e=>new t.Point(e[0],e[1])));break;case e.FieldType.GeoPolygon:l=new t.Polygon(r.coordinates.map(e=>new t.LineString(e.map(([e,i])=>new t.Point(e,i)))));break;case e.FieldType.GeoMultiPoint:l=new t.MultiPoint(r.coordinates.map(e=>new t.Point(e[0],e[1])));break;case e.FieldType.GeoMultiLineString:l=new t.MultiLineString(r.coordinates.map(e=>new t.LineString(e.map(([e,i])=>new t.Point(e,i)))));break;case e.FieldType.GeoMultiPolygon:l=new t.MultiPolygon(r.coordinates.map(e=>new t.Polygon(e.map(e=>new t.LineString(e.map(([e,i])=>new t.Point(e,i)))))));break;case e.FieldType.Timestamp:l=new Date(1e3*r.$timestamp);break;case e.FieldType.Object:case e.FieldType.Array:l=n.formatField(r);break;case e.FieldType.ServerDate:l=new Date(r.$date);break;default:l=r}Array.isArray(o)?o.push(l):o[a]=l}),o}),n.whichType=(n=>{let a=Object.prototype.toString.call(n).slice(8,-1);if(a===e.FieldType.Object){if(n instanceof t.Point)return e.FieldType.GeoPoint;if(n instanceof Date)return e.FieldType.Timestamp;if(n instanceof i.ServerDate)return e.FieldType.ServerDate;n.$timestamp?a=e.FieldType.Timestamp:n.$date?a=e.FieldType.ServerDate:t.Point.validate(n)?a=e.FieldType.GeoPoint:t.LineString.validate(n)?a=e.FieldType.GeoLineString:t.Polygon.validate(n)?a=e.FieldType.GeoPolygon:t.MultiPoint.validate(n)?a=e.FieldType.GeoMultiPoint:t.MultiLineString.validate(n)?a=e.FieldType.GeoMultiLineString:t.MultiPolygon.validate(n)&&(a=e.FieldType.GeoMultiPolygon)}return a}),n.generateDocId=(()=>{let e="ABCDEFabcdef0123456789",t="";for(let i=0;i<24;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}),exports.Util=n;