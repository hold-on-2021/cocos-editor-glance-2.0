"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./auth"),t=require("./http-request");exports.cloudBaseRequest=async function(s){const{config:a,params:n={},method:o="POST",headers:c={}}=s,r=Object.assign(Object.assign({},n),{envName:a.envId,timestamp:Date.now()}),i=Object.assign(Object.assign({},c),{"content-type":"application/json","user-agent":"cloudbase-manager-node/0.1.0","x-tcb-source":"cloudbase-manager-node, not-scf"}),{secretId:d,secretKey:u,token:m,proxy:p}=a,h={secretId:d,secretKey:u,method:o,pathname:"/admin",params:r,headers:i},b=e.getAuth(h),g=Object.assign(Object.assign({},r),{sessionToken:m,authorization:b});return await t.fetch("https://tcb-admin.tencentcloudapi.com/admin",{method:o,body:JSON.stringify(g),headers:i},process.env.TCB_ADMIN_PROXY||p)};