"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=r(require("fs")),n=r(require("archiver")),i=r(require("crypto")),u=require("../constant");var o=require("./uuid");exports.guid6=o.guid6,e(require("./cloud-api-request")),e(require("./auth")),e(require("./cloudbase-request")),e(require("./http-request")),e(require("./envLazy")),e(require("./fs")),exports.zipDir=async function(e){const{dirPath:r,outputPath:i,ignore:u,pattern:o="**/*"}=e;return new Promise((e,s)=>{const a=t.default.createWriteStream(i),c=n.default("zip");a.on("close",function(){e({zipPath:i,size:Math.ceil(c.pointer()/1024)})}),c.on("error",function(e){s(e)}),c.pipe(a),c.glob(o,{cwd:r,ignore:u,dot:!0}),c.finalize()})},exports.getRuntime=function(){return process.env[u.ENV_NAME.ENV_RUNENV]},exports.getEnvVar=function(e){return process.env[e]},exports.rsaEncrypt=function(e){const r=Buffer.from(e);return i.default.publicEncrypt({key:u.PUBLIC_RSA_KEY,padding:i.default.constants.RSA_PKCS1_PADDING},r).toString("base64")},exports.sleep=function(e){return new Promise(r=>{setTimeout(()=>{r()},e)})};