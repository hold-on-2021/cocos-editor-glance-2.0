"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./database"),n=require("./function"),t=require("./storage"),i=require("./env"),r=require("./common"),s=require("./error");exports.Environment=class{constructor(r,s){this.inited=!1,this.envId=s,this.cloudBaseContext=r,this.functionService=new n.FunctionService(this),this.databaseService=new e.DatabaseService(this),this.storageService=new t.StorageService(this),this.envService=new i.EnvService(this)}async lazyInit(){return this.inited?this.lazyEnvironmentConfig:this.envService.getEnvInfo().then(e=>{if(this.lazyEnvironmentConfig=e.EnvInfo,!this.lazyEnvironmentConfig.EnvId)throw new s.CloudBaseError(`Environment ${this.envId} not found`);return this.inited=!0,this.lazyEnvironmentConfig})}getEnvId(){return this.envId}getStorageService(){return this.storageService}getDatabaseService(){return this.databaseService}getFunctionService(){return this.functionService}getEnvService(){return this.envService}getCommonService(e="tcb"){return new r.CommonService(this,e)}getServicesEnvInfo(){return this.envService.getEnvInfo().then(e=>e.EnvInfo)}};