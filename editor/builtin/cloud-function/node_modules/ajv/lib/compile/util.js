"use strict";function r(r,e,t){var n=t?" !== ":" === ",a=t?" || ":" && ",o=t?"!":"",u=t?"":"!";switch(r){case"null":return e+n+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+a+"typeof "+e+n+'"object"'+a+u+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+a+u+"("+e+" % 1)"+a+e+n+e+")";default:return"typeof "+e+n+'"'+r+'"'}}module.exports={copy:function(r,e){for(var t in e=e||{},r)e[t]=r[t];return e},checkDataType:r,checkDataTypes:function(e,n){switch(e.length){case 1:return r(e[0],n,!0);default:var a="",o=t(e);for(var u in o.array&&o.object&&(a=o.null?"(":"(!"+n+" || ",a+="typeof "+n+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)a+=(a?" && ":"")+r(u,n,!0);return a}},coerceToTypes:function(r,t){if(Array.isArray(t)){for(var n=[],a=0;a<t.length;a++){var o=t[a];e[o]?n[n.length]=o:"array"===r&&"array"===o&&(n[n.length]=o)}if(n.length)return n}else{if(e[t])return[t];if("array"===r&&"array"===t)return["array"]}},toHash:t,getProperty:o,escapeQuotes:u,equal:require("fast-deep-equal"),ucs2length:require("./ucs2length"),varOccurences:function(r,e){e+="[^0-9]";var t=r.match(new RegExp(e,"g"));return t?t.length:0},varReplace:function(r,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),r.replace(new RegExp(e,"g"),t+"$1")},cleanUpCode:function(r){return r.replace(c,"").replace(l,"").replace(i,"if (!($1))")},finalCleanUpCode:function(r,e){var t=r.match(s);t&&2==t.length&&(r=e?r.replace(p,"").replace(h,y):r.replace(f,"").replace(g,v));return(t=r.match(d))&&3===t.length?r.replace(m,""):r},schemaHasRules:function(r,e){if("boolean"==typeof r)return!r;for(var t in r)if(e[t])return!0},schemaHasRulesExcept:function(r,e,t){if("boolean"==typeof r)return!r&&"not"!=t;for(var n in r)if(n!=t&&e[n])return!0},schemaUnknownRules:function(r,e){if("boolean"==typeof r)return;for(var t in r)if(!e[t])return t},toQuotedString:w,getPathExpr:function(r,e,t,n){return E(r,t?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(r,e,t){var n=w(t?"/"+A(e):o(e));return E(r,n)},getData:function(r,e,t){var n,a,u,c;if(""===r)return"rootData";if("/"==r[0]){if(!$.test(r))throw new Error("Invalid JSON-pointer: "+r);a=r,u="rootData"}else{if(!(c=r.match(b)))throw new Error("Invalid JSON-pointer: "+r);if(n=+c[1],"#"==(a=c[2])){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return t[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(u="data"+(e-n||""),!a)return u}for(var l=u,i=a.split("/"),s=0;s<i.length;s++){var f=i[s];f&&(u+=o(D(f)),l+=" && "+u)}return l},unescapeFragment:function(r){return D(decodeURIComponent(r))},unescapeJsonPointer:D,escapeFragment:function(r){return encodeURIComponent(A(r))},escapeJsonPointer:A};var e=t(["string","number","integer","boolean","null"]);function t(r){for(var e={},t=0;t<r.length;t++)e[r[t]]=!0;return e}var n=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function o(r){return"number"==typeof r?"["+r+"]":n.test(r)?"."+r:"['"+u(r)+"']"}function u(r){return r.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var c=/else\s*{\s*}/g,l=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,i=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var s=/[^v.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,p=/var errors = 0;|var vErrors = null;/g,g="return errors === 0;",v="validate.errors = null; return true;",h=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,y="return data;",d=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,m=/if \(rootData === undefined\) rootData = data;/;function w(r){return"'"+u(r)+"'"}var $=/^\/(?:[^~]|~0|~1)*$/,b=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function E(r,e){return'""'==r?e:(r+" + "+e).replace(/' \+ '/g,"")}function A(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}function D(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}