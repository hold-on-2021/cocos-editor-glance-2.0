"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return Array.isArray(t)?t:[t]}var r=/^\s+$/,i=/^\\!/,u=/^\\#/,o=/\r?\n/g,c=/^\.*\/|^\.+$/,a="undefined"!=typeof Symbol?Symbol.for("node-ignore"):"node-ignore",s=function(t,e,n){return Object.defineProperty(t,e,{value:n})},f=/([0-z])-([0-z])/g,h=[[/\\?\s+$/,function(t){return 0===t.indexOf("\\")?" ":""}],[/\\\s/g,function(){return" "}],[/[\\^$.|*+(){]/g,function(t){return"\\".concat(t)}],[/\[([^\]/]*)($|\])/g,function(t,e,n){return"]"===n?"[".concat(function(t){return t.replace(f,function(t,e,n){return e.charCodeAt(0)<=n.charCodeAt(0)?t:""})}(e),"]"):"\\".concat(t)}],[/(?!\\)\?/g,function(){return"[^/]"}],[/^\//,function(){return"^"}],[/\//g,function(){return"\\/"}],[/^\^*\\\*\\\*\\\//,function(){return"^(?:.*\\/)?"}],[/(?:[^*])$/,function(t){return/\/$/.test(t)?"".concat(t,"$"):"".concat(t,"(?=$|\\/$)")}],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,function(t,e,n){return e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"}],[/(^|[^\\]+)\\\*(?=.+)/g,function(t,e){return"".concat(e,"[^\\/]*")}],[/(\^|\\\/)?\\\*$/,function(t,e){var n=e?"".concat(e,"[^/]+"):"[^/]*";return"".concat(n,"(?=$|\\/$)")}],[/\\\\\\/g,function(){return"\\"}]],l=Object.create(null),d=function(t){return"string"==typeof t},v=function(t,n){var r=t,o=!1;return 0===t.indexOf("!")&&(o=!0,t=t.substr(1)),new function t(n,r,i,u){e(this,t),this.origin=n,this.pattern=r,this.negative=i,this.regex=u}(r,t=t.replace(i,"!").replace(u,"#"),o,function(t,e,n){var r=l[t];if(r)return r;var i=h.reduce(function(e,n){return e.replace(n[0],n[1].bind(t))},t);return l[t]=n?new RegExp(i,"i"):new RegExp(i)}(t,0,n))},g=function(t,e){throw new e(t)},p=function t(e,n,r){if(!d(e))return r("path must be a string, but got `".concat(n,"`"),TypeError);if(!e)return r("path must not be empty",TypeError);if(t.isNotRelative(e)){return r("path should be a ".concat("`path.relative()`d",' string, but got "').concat(n,'"'),RangeError)}return!0},_=function(t){return c.test(t)};p.isNotRelative=_,p.convert=function(t){return t};var y=function(){function i(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ignorecase,n=void 0===t||t;e(this,i),this._rules=[],this._ignorecase=n,s(this,a,!0),this._initCache()}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(i,[{key:"_initCache",value:function(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}},{key:"_addPattern",value:function(t){if(t&&t[a])return this._rules=this._rules.concat(t._rules),this._added=!0,void 0;if(function(t){return t&&d(t)&&!r.test(t)&&0!==t.indexOf("#")}(t)){var e=v(t,this._ignorecase);this._added=!0,this._rules.push(e)}}},{key:"add",value:function(t){return this._added=!1,n(d(t)?function(t){return t.split(o)}(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}},{key:"addPattern",value:function(t){return this.add(t)}},{key:"_testOne",value:function(t,e){var n=!1,r=!1;return this._rules.forEach(function(i){var u=i.negative;r===u&&n!==r||u&&!n&&!r&&!e||i.regex.test(t)&&(n=!u,r=u)}),{ignored:n,unignored:r}}},{key:"_test",value:function(t,e,n,r){var i=t&&p.convert(t);return p(i,t,g),this._t(i,e,n,r)}},{key:"_t",value:function(t,e,n,r){if(t in e)return e[t];if(r||(r=t.split("/")),r.pop(),!r.length)return e[t]=this._testOne(t,n);var i=this._t(r.join("/")+"/",e,n,r);return e[t]=i.ignored?i:this._testOne(t,n)}},{key:"ignores",value:function(t){return this._test(t,this._ignoreCache,!1).ignored}},{key:"createFilter",value:function(){var t=this;return function(e){return!t.ignores(e)}}},{key:"filter",value:function(t){return n(t).filter(this.createFilter())}},{key:"test",value:function(t){return this._test(t,this._testCache,!0)}}]),i}(),b=function(t){return new y(t)},$=function(){return!1};if(b.isPathValid=function(t){return p(t&&p.convert(t),t,$)},b.default=b,module.exports=b,"undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){p.convert=function(t){return/^\\\\\?\\/.test(t)||/[\0-\x1F"<>\|]+/.test(t)?t:t.replace(/\\/g,"/")};var k=/^[a-z]:\//i;p.isNotRelative=function(t){return k.test(t)||_(t)}}