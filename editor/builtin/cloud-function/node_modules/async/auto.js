"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(c,s,d){"function"==typeof s&&(d=s,s=null),d=(0,o.default)(d||a.default);var h=(0,u.default)(c).length;if(!h)return d(null);s||(s=h);var p={},v=0,y=!1,q=Object.create(null),g=[],x=[],_={};function w(t,r){g.push(function(){(function(t,r){if(y)return;var u=(0,i.default)(function(r,u){if(v--,arguments.length>2&&(u=(0,l.default)(arguments,1)),r){var a={};(0,n.default)(p,function(e,n){a[n]=e}),a[t]=u,y=!0,q=Object.create(null),d(r,a)}else p[t]=u,function(n){var t=q[n]||[];(0,e.default)(t,function(e){e()}),O()}(t)});v++;var a=(0,f.default)(r[r.length-1]);r.length>1?a(p,u):a(u)})(t,r)})}function O(){if(0===g.length&&0===v)return d(null,p);for(;g.length&&v<s;){g.shift()()}}function b(e){var u=[];return(0,n.default)(c,function(n,a){(0,r.default)(n)&&(0,t.default)(n,e,0)>=0&&u.push(a)}),u}(0,n.default)(c,function(n,t){if(!(0,r.default)(n))return w(t,[n]),x.push(t),void 0;var u=n.slice(0,n.length-1),a=u.length;if(0===a)return w(t,n),x.push(t),void 0;_[t]=a,(0,e.default)(u,function(e){if(!c[e])throw new Error("async.auto task `"+t+"` has a non-existent dependency `"+e+"` in "+u.join(", "));(function(e,n){var t=q[e];t||(t=q[e]=[]);t.push(n)})(e,function(){0===--a&&w(t,n)})})}),function(){var n,t=0;for(;x.length;)n=x.pop(),t++,(0,e.default)(b(n),function(e){0==--_[e]&&x.push(e)});if(t!==h)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),O()};var e=c(require("lodash/_arrayEach")),n=c(require("lodash/_baseForOwn")),t=c(require("lodash/_baseIndexOf")),r=c(require("lodash/isArray")),u=c(require("lodash/keys")),a=c(require("lodash/noop")),l=c(require("./internal/slice")),o=c(require("./internal/once")),i=c(require("./internal/onlyOnce")),f=c(require("./internal/wrapAsync"));function c(e){return e&&e.__esModule?e:{default:e}}module.exports=exports.default;