"use strict";var e=require("../index"),r=require("assert");describe("json-schema-traverse",function(){var t;function i(){t.push(Array.prototype.slice.call(arguments))}function o(){t.push(["pre"].concat(Array.prototype.slice.call(arguments)))}function s(){t.push(["post"].concat(Array.prototype.slice.call(arguments)))}beforeEach(function(){t=[]}),it("should traverse all keywords containing schemas recursively",function(){var o=require("./fixtures/schema").schema,s=require("./fixtures/schema").expectedCalls;e(o,{cb:i}),r.deepStrictEqual(t,s)}),describe("Legacy v0.3.1 API",function(){it("should traverse all keywords containing schemas recursively",function(){var o=require("./fixtures/schema").schema,s=require("./fixtures/schema").expectedCalls;e(o,i),r.deepStrictEqual(t,s)}),it("should work when an options object is provided",function(){var o=require("./fixtures/schema").schema,s=require("./fixtures/schema").expectedCalls;e(o,{},i),r.deepStrictEqual(t,s)})}),describe("allKeys option",function(){var o={someObject:{minimum:1,maximum:2}};it("should traverse objects with allKeys: true option",function(){var s=[[o,"",o,void 0,void 0,void 0,void 0],[o.someObject,"/someObject",o,"","someObject",o,void 0]];e(o,{allKeys:!0,cb:i}),r.deepStrictEqual(t,s)}),it("should NOT traverse objects with allKeys: false option",function(){var s=[[o,"",o,void 0,void 0,void 0,void 0]];e(o,{allKeys:!1,cb:i}),r.deepStrictEqual(t,s)}),it("should NOT traverse objects without allKeys option",function(){var s=[[o,"",o,void 0,void 0,void 0,void 0]];e(o,{cb:i}),r.deepStrictEqual(t,s)}),it("should NOT travers objects in standard keywords which value is not a schema",function(){var o={const:{foo:"bar"},enum:["a","b"],required:["foo"],another:{},patternProperties:{},dependencies:!0,properties:{smaller:{type:"number"},larger:{type:"number",minimum:{$data:"1/smaller"}}}},s=[[o,"",o,void 0,void 0,void 0,void 0],[o.another,"/another",o,"","another",o,void 0],[o.properties.smaller,"/properties/smaller",o,"","properties",o,"smaller"],[o.properties.larger,"/properties/larger",o,"","properties",o,"larger"]];e(o,{allKeys:!0,cb:i}),r.deepStrictEqual(t,s)})}),describe("pre and post",function(){var i={type:"object",properties:{name:{type:"string"},age:{type:"number"}}};it("should traverse schema in pre-order",function(){e(i,{cb:{pre:o}});var s=[["pre",i,"",i,void 0,void 0,void 0,void 0],["pre",i.properties.name,"/properties/name",i,"","properties",i,"name"],["pre",i.properties.age,"/properties/age",i,"","properties",i,"age"]];r.deepStrictEqual(t,s)}),it("should traverse schema in post-order",function(){e(i,{cb:{post:s}});var o=[["post",i.properties.name,"/properties/name",i,"","properties",i,"name"],["post",i.properties.age,"/properties/age",i,"","properties",i,"age"],["post",i,"",i,void 0,void 0,void 0,void 0]];r.deepStrictEqual(t,o)}),it("should traverse schema in pre- and post-order at the same time",function(){e(i,{cb:{pre:o,post:s}});var a=[["pre",i,"",i,void 0,void 0,void 0,void 0],["pre",i.properties.name,"/properties/name",i,"","properties",i,"name"],["post",i.properties.name,"/properties/name",i,"","properties",i,"name"],["pre",i.properties.age,"/properties/age",i,"","properties",i,"age"],["post",i.properties.age,"/properties/age",i,"","properties",i,"age"],["post",i,"",i,void 0,void 0,void 0,void 0]];r.deepStrictEqual(t,a)})})});