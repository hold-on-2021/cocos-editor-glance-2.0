"use strict";module.exports=function(r,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n="boolean"==typeof t.cycles&&t.cycles,e=t.cmp&&function(r){return function(t){return function(n,e){var i={key:n,value:t[n]},u={key:e,value:t[e]};return r(i,u)}}}(t.cmp),i=[];return function r(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var u,o;if(Array.isArray(t)){for(o="[",u=0;u<t.length;u++)u&&(o+=","),o+=r(t[u])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var f=i.push(t)-1,c=Object.keys(t).sort(e&&e(t));for(o="",u=0;u<c.length;u++){var l=c[u],y=r(t[l]);y&&(o&&(o+=","),o+=JSON.stringify(l)+":"+y)}return i.splice(f,1),"{"+o+"}"}}(r)};