var e=require("path"),r="win32"===process.platform,n=require("fs"),t=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function o(e){return"function"==typeof e?e:function(){var e;if(t){var r=new Error;e=function(e){e&&(r.message=e.message,n(e=r))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var r="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(r):console.error(r)}}}}()}e.normalize;if(r)var i=/(.*?)(?:[\/\\]+|$)/g;else i=/(.*?)(?:[\/]+|$)/g;if(r)var s=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else s=/^[\/]*/;exports.realpathSync=function(t,o){if(t=e.resolve(t),o&&Object.prototype.hasOwnProperty.call(o,t))return o[t];var c,a,l,f,u=t,p={},v={};function y(){var e=s.exec(t);c=e[0].length,a=e[0],l=e[0],f="",r&&!v[l]&&(n.lstatSync(l),v[l]=!0)}for(y();c<t.length;){i.lastIndex=c;var h=i.exec(t);if(f=a,a+=h[0],l=f+h[1],c=i.lastIndex,!(v[l]||o&&o[l]===l)){var g;if(o&&Object.prototype.hasOwnProperty.call(o,l))g=o[l];else{var x=n.lstatSync(l);if(!x.isSymbolicLink()){v[l]=!0,o&&(o[l]=l);continue}var O=null;if(!r){var S=x.dev.toString(32)+":"+x.ino.toString(32);p.hasOwnProperty(S)&&(O=p[S])}null===O&&(n.statSync(l),O=n.readlinkSync(l)),g=e.resolve(f,O),o&&(o[l]=g),r||(p[S]=O)}t=e.resolve(g,t.slice(c)),y()}}return o&&(o[u]=t),t},exports.realpath=function(t,c,a){if("function"!=typeof a&&(a=o(c),c=null),t=e.resolve(t),c&&Object.prototype.hasOwnProperty.call(c,t))return process.nextTick(a.bind(null,null,c[t]));var l,f,u,p,v=t,y={},h={};function g(){var e=s.exec(t);l=e[0].length,f=e[0],u=e[0],p="",r&&!h[u]?n.lstat(u,function(e){if(e)return a(e);h[u]=!0,x()}):process.nextTick(x)}function x(){if(l>=t.length)return c&&(c[v]=t),a(null,t);i.lastIndex=l;var e=i.exec(t);return p=f,f+=e[0],u=p+e[1],l=i.lastIndex,h[u]||c&&c[u]===u?process.nextTick(x):c&&Object.prototype.hasOwnProperty.call(c,u)?k(c[u]):n.lstat(u,O)}function O(e,t){if(e)return a(e);if(!t.isSymbolicLink())return h[u]=!0,c&&(c[u]=u),process.nextTick(x);if(!r){var o=t.dev.toString(32)+":"+t.ino.toString(32);if(y.hasOwnProperty(o))return S(null,y[o],u)}n.stat(u,function(e){if(e)return a(e);n.readlink(u,function(e,n){r||(y[o]=n),S(e,n)})})}function S(r,n,t){if(r)return a(r);var o=e.resolve(p,n);c&&(c[t]=o),k(o)}function k(r){t=e.resolve(r,t.slice(l)),g()}g()};