"use strict";const e=require("fill-range"),r=require("./utils");module.exports=((t,n={})=>{let l=(t,i={})=>{let u=r.isInvalidBrace(i),a=!0===t.invalid&&!0===n.escapeInvalid,s=!0===u||!0===a,o=!0===n.escapeInvalid?"\\":"",f="";if(!0===t.isOpen)return o+t.value;if(!0===t.isClose)return o+t.value;if("open"===t.type)return s?o+t.value:"(";if("close"===t.type)return s?o+t.value:")";if("comma"===t.type)return"comma"===t.prev.type?"":s?t.value:"|";if(t.value)return t.value;if(t.nodes&&t.ranges>0){let l=r.reduce(t.nodes),i=e(...l,{...n,wrap:!1,toRegex:!0});if(0!==i.length)return l.length>1&&i.length>1?`(${i})`:i}if(t.nodes)for(let e of t.nodes)f+=l(e,t);return f};return l(t)});