"use strict";var e=require("is-glob"),s=require("path").posix.dirname,r="win32"===require("os").platform(),i=/\\/g,a=/[\{\[].*[\/]*.*[\}\]]$/,t=/(^|[^\\])([\{\[]|\([^\)]+$)/,l=/\\([\*\?\|\[\]\(\)\{\}])/g;module.exports=function(o,p){Object.assign({flipBackslashes:!0},p).flipBackslashes&&r&&o.indexOf("/")<0&&(o=o.replace(i,"/")),a.test(o)&&(o+="/"),o+="a";do{o=s(o)}while(e(o)||t.test(o));return o.replace(l,"$1")};