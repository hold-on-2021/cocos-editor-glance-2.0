var r=require("child_process"),o=require("merge"),n={stdio:"inherit"};module.exports=function(t,e,c){var i;Array.isArray(t)&&(t=t.join(";")),!0===e&&(e={stdio:null}),"function"==typeof e?(c=e,e=n):(e=o(!0,n,e=e||{}),c=c||function(){});var d="",a="",s="win32"===process.platform?{cmd:"cmd",arg:"/C"}:{cmd:"sh",arg:"-c"};try{i=r.spawn(s.cmd,[s.arg,t],e)}catch(r){return c(r,d,a),void 0}return i.stdout&&i.stdout.on("data",function(r){d+=r}),i.stderr&&i.stderr.on("data",function(r){a+=r}),i.on("close",function(r){if(r){var o=new Error("Shell command exit with non zero code: "+r);o.code=r,c(o,d,a)}else c(null,d,a)}),i};