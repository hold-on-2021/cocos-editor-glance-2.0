var e=require("path"),t=require("util"),i='"<group>"',r="BUILT_PRODUCTS_DIR",s="Resources",o="unknown",c={a:"archive.ar",app:"wrapper.application",appex:"wrapper.app-extension",bundle:"wrapper.plug-in",dylib:"compiled.mach-o.dylib",framework:"wrapper.framework",h:"sourcecode.c.h",m:"sourcecode.c.objc",markdown:"text",mdimporter:"wrapper.cfbundle",octest:"wrapper.cfbundle",pch:"sourcecode.c.h",plist:"text.plist.xml",sh:"text.script.sh",swift:"sourcecode.swift",tbd:"sourcecode.text-based-dylib-definition",xcassets:"folder.assetcatalog",xcconfig:"text.xcconfig",xcdatamodel:"wrapper.xcdatamodel",xcodeproj:"wrapper.pb-project",xctest:"wrapper.cfbundle",xib:"file.xib",strings:"text.plist.strings"},a={"archive.ar":"Frameworks","compiled.mach-o.dylib":"Frameworks","sourcecode.text-based-dylib-definition":"Frameworks","wrapper.framework":"Frameworks","embedded.framework":"Embed Frameworks","sourcecode.c.h":"Resources","sourcecode.c.objc":"Sources","sourcecode.swift":"Sources"},n={"compiled.mach-o.dylib":"usr/lib/","sourcecode.text-based-dylib-definition":"usr/lib/","wrapper.framework":"System/Library/Frameworks/"},p={"compiled.mach-o.dylib":"SDKROOT","sourcecode.text-based-dylib-definition":"SDKROOT","wrapper.framework":"SDKROOT"},l={"sourcecode.c.h":4,"sourcecode.c.h":4,"sourcecode.c.objc":4,"sourcecode.swift":4,text:4,"text.plist.xml":4,"text.script.sh":4,"text.xcconfig":4,"text.plist.strings":4};function d(e){return e.replace(/(^")|("$)/g,"")}module.exports=function(u,m){m=m||{},this.basename=e.basename(u),this.lastKnownFileType=m.lastKnownFileType||function(t){var i=e.extname(t).substring(1),r=c[d(i)];return r||o}(u),this.group=function(t,i){var r=e.extname(t.basename).substring(1),o=t.lastKnownFileType||t.explicitFileType,c=a[d(o)];return"xcdatamodeld"===r?"Sources":i.customFramework&&i.embed?a["embedded.framework"]:c||s}(this,m),1==m.customFramework&&(this.customFramework=!0,this.dirname=e.dirname(u).replace(/\\/g,"/")),this.path=function(t,i){var r=t.lastKnownFileType||t.explicitFileType,s=n[d(r)];return t.customFramework?i:s?e.join(s,e.basename(i)):i}(this,u).replace(/\\/g,"/"),this.fileEncoding=this.defaultEncoding=m.defaultEncoding||function(e){var t=e.lastKnownFileType||e.explicitFileType,i=l[d(t)];if(i)return i}(this),m.explicitFileType&&(this.explicitFileType=m.explicitFileType,this.basename=this.basename+"."+function(e){var t=e.lastKnownFileType||e.explicitFileType;for(var i in c)if(c.hasOwnProperty(d(i))&&c[d(i)]===t)return i}(this),delete this.path,delete this.lastKnownFileType,delete this.group,delete this.defaultEncoding),this.sourceTree=m.sourceTree||function(e){var t=e.lastKnownFileType||e.explicitFileType,s=p[d(t)];return e.explicitFileType?r:e.customFramework?i:s||i}(this),this.includeInIndex=0,m.weak&&!0===m.weak&&(this.settings={ATTRIBUTES:["Weak"]}),m.compilerFlags&&(this.settings||(this.settings={}),this.settings.COMPILER_FLAGS=t.format('"%s"',m.compilerFlags)),m.embed&&m.sign&&(this.settings||(this.settings={}),this.settings.ATTRIBUTES||(this.settings.ATTRIBUTES=[]),this.settings.ATTRIBUTES.push("CodeSignOnCopy"))};