"use strict";var e=require("../../utils/arrays"),n=require("../../grammar-error"),r=require("../asts"),i=require("../visitor");module.exports=function(s){var u=[],o=i.build({rule:function(e){u.push(e.name),o(e.expression),u.pop(e.name)},sequence:function(n){e.every(n.elements,function(e){return o(e),!r.alwaysConsumesOnSuccess(s,e)})},rule_ref:function(i){if(e.contains(u,i.name))throw u.push(i.name),new n("Possible infinite loop when parsing (left recursion: "+u.join(" -> ")+").",i.location);o(r.findRule(s,i.name))}});o(s)};