var e=require("base64-js"),r=require("xmlbuilder");exports.build=function(t,a){var i={version:"1.0",encoding:"UTF-8"},o={pubid:"-//Apple//DTD PLIST 1.0//EN",sysid:"http://www.apple.com/DTDs/PropertyList-1.0.dtd"},f=r.create("plist");f.dec(i.version,i.encoding,i.standalone),f.dtd(o.pubid,o.sysid),f.att("version","1.0"),function r(t,a){var i,o,f,l=n(t);if("Undefined"!=l)if(Array.isArray(t))for(a=a.ele("array"),o=0;o<t.length;o++)r(t[o],a);else if(Buffer.isBuffer(t))a.ele("data").raw(t.toString("base64"));else if("Object"==l)for(f in a=a.ele("dict"),t)t.hasOwnProperty(f)&&(a.ele("key").txt(f),r(t[f],a));else"Number"==l?(i=t%1==0?"integer":"real",a.ele(i).txt(t.toString())):"Date"==l?a.ele("date").txt(function(e){function r(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())+"T"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())+"Z"}(new Date(t))):"Boolean"==l?a.ele(t?"true":"false"):"String"==l?a.ele("string").txt(t):"ArrayBuffer"==l?a.ele("data").raw(e.fromByteArray(t)):t&&t.buffer&&"ArrayBuffer"==n(t.buffer)&&a.ele("data").raw(e.fromByteArray(new Uint8Array(t.buffer),a))}(t,f),a||(a={});return a.pretty=!1!==a.pretty,f.end(a)};var t=Object.prototype.toString;function n(e){var r=t.call(e).match(/\[object (.*)\]/);return r?r[1]:r}