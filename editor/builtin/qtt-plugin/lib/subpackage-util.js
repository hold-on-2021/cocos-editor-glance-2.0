let e,n,i,a,s,t,r,o=require("./hashes.min.js"),c=require("path"),p=require("fs-extra");module.exports={gatherInfo(o){r=o.JsZip,t=o.cpk,s=o.gameConfig,a=o.title,e=o.buildPath,i=o.subpackages,n=[]},organizeResources(){let a=s.subpackages=[];for(let s in i){if(!i.hasOwnProperty(s))continue;let t=i[s].name,r=c.join(e,"subpackages",t);n.push(r),p.renameSync(c.join(r,"index.js"),c.join(r,"main.js")),a.push({name:t,root:t+"/"})}},pack(){let i=c.join(e,"subpackages");n.forEach(function(e){let n=new r,s=c.win32.basename(e),t=o.CRC32(s+"/"),u=c.join(i,a+"."+t+".cpk");p.existsSync(u)&&p.unlinkSync(u);let f=p.createWriteStream(u);n.directory(e,s),n.generateNodeStream({type:"nodebuffer",base64:!1,compression:"DEFLATE"}).pipe(f).on("finish",function(){})})}};