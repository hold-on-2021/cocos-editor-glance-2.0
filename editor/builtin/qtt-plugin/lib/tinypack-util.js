let e,r,n,s,i,o,t=require("path"),a=require("fs-extra"),c=t.join(__dirname,"../","res"),d=(t.join(c,"jsb-adapter"),!1);module.exports={gatherInfo(a){e=a.cpk,d=!!a.customConfig.tinyPackageMode,s=!!a.customConfig.packFirstScreenRes,r=a.buildPath,i=a.buildResults,o=a.startScene,n=t.join(r,"server")},async organizeResources(){},pack(){if(!1===d)return e.directory(t.join(r,"res"),"res"),void 0;if(!1===s)return;let c=t.join(n,"res","raw-assets"),v=t.join(r,"res","raw-assets");a.moveSync(v,c),a.removeSync(v);for(var y=i.getDependencies(o),j=0;j<y.length;++j){var m=y[j],u=i.getNativeAssetPath(m);if(!u||0===u.length)continue;let e=t.join(n,u.replace(r,""));a.moveSync(e,u);var l=t.dirname(e);a.existsSync(l)&&0===a.readdirSync(l).length&&a.removeSync(l)}e.directory(t.join(r,"res"),"res")},packFinished(){!1!==d&&!1!==s&&(a.removeSync(t.join(r,"res")),a.moveSync(t.join(n,"res"),t.join(r,"res")),a.removeSync(n))}};