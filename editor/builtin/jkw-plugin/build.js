let e=require("./lib/cpk-util.js");module.exports={name:Editor.T("cpk-publish.platform_name"),platform:"jkw-game",output:"cocos-play",extends:"runtime",buttons:[Editor.Builder.DefaultButtons.Build],messages:{"build-start":function(e,t){let i=require("fs-extra");i.existsSync(t.dest)&&i.emptyDirSync(t.dest),e.reply()},"build-finished":async function(t,i){await e.gatherInfo(i),!1!==await e.organizeResources(t)&&(await e.pack(),t.reply(),function(e){var t;t=void 0!==Editor.Profile.load.getSelfData?Editor.Profile.load("project://cpk-publish.json").getSelfData():Editor.Profile.load("profile://project/cpk-publish.json").data;var i=CocosEngine,r=parseInt("2.2.1".replace(/[^\d]/g,""));if(parseInt(i.slice(0,6).replace(/[^\d]/g,""))>=r==1){let i={resUrl:t.tinyPackageServer,orientation:t.deviceOrientation,projectName:t.name};Editor.Ipc.sendToMain("builder:notify-build-result",e,i)}}(i))},play(e,t){}},settings:Editor.url("packages://cpk-publish/build-ui.js")};