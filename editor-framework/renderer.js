"use strict";(()=>{try{require("./lib/share/polyfills");const e=require("electron"),t=require("fire-path");let o;window.onerror=function(e,t,r,a,n){return o&&o.Ipc.sendToMain?o.Ipc.sendToMain("editor:renderer-console-error",n.stack||n):console.error(n.stack||n),!1},window.addEventListener("dragstart",e=>{e.preventDefault(),e.stopPropagation()}),window.addEventListener("drop",e=>{e.preventDefault(),e.stopPropagation()}),window.addEventListener("dragover",e=>{e.dataTransfer.dropEffect="none",e.preventDefault(),e.stopPropagation()}),window.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()}),window.addEventListener("copy",e=>{if(e.target!==document.body)return;let t=o.UI.focusedPanelFrame;t&&(e.preventDefault(),e.stopPropagation(),o.UI.fire(t,"panel-copy",{bubbles:!1,detail:{clipboardData:e.clipboardData}}))}),window.addEventListener("cut",e=>{if(e.target!==document.body)return;let t=o.UI.focusedPanelFrame;t&&(e.preventDefault(),e.stopPropagation(),o.UI.fire(t,"panel-cut",{bubbles:!1,detail:{clipboardData:e.clipboardData}}))}),window.addEventListener("paste",e=>{if(e.target!==document.body)return;let t=o.UI.focusedPanelFrame;t&&(e.preventDefault(),e.stopPropagation(),o.UI.fire(t,"panel-paste",{bubbles:!1,detail:{clipboardData:e.clipboardData}}))}),window.addEventListener("beforeunload",e=>{let t=!1;o.Panel.panels.forEach(e=>{let o=!0;e.close&&(o=e.close()),!1===o&&(t=!0)}),t&&(e.returnValue=!0)}),e.webFrame.setVisualZoomLevelLimits?e.webFrame.setVisualZoomLevelLimits(1,1):e.webFrame.setZoomLevelLimits(1,1);let r=e.remote.getGlobal("Editor"),a=r.url("app://"),n=r.url("editor-framework://");if(require("module").globalPaths.push(t.join(a,"node_modules")),(o=require(`${n}/lib/renderer`)).remote=r,window.location.hash){let e=window.location.hash.slice(1);o.argv=Object.freeze(JSON.parse(decodeURIComponent(e)))}else o.argv={};o.dev=r.dev,o.lang=r.lang,o.appPath=a,o.frameworkPath=n,o.Ipc.debug=r.dev,o.Protocol.init(o)}catch(e){window.onload=function(){let t=require("electron").remote.getCurrentWindow();t.setSize(800,600),t.center(),t.show(),t.openDevTools(),console.error(e.stack||e)}}})();